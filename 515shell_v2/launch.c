#include "515head.h"

//è¿™ä¸ªæ–‡ä»¶è´Ÿè´£å”¤é†’å…¶ä»–æ²¡æœ‰å†…å»ºçš„åŠŸèƒ½ï¼Œç›´æ¥ä½¿ç”¨ç³»ç»Ÿè°ƒç”¨

int FOF_launch(char **args){

    char path[100];
    bzero(path, 100);
    strcat(path, "/bin/"); //å°†ä¸¤ä¸ªcharç±»å‹è¿æ¥
    ///bin: /usr/bin: å¯æ‰§è¡ŒäºŒè¿›åˆ¶æ–‡ä»¶çš„ç›®å½•ï¼Œå¦‚å¸¸ç”¨çš„å‘½ä»¤lsã€tarã€mvã€catç­‰ã€‚
    strcat(path, args[0]);
    int rc = fork();
    if (rc > 0)
    { //çˆ¶è¿›ç¨‹
        //int *status;
        //waitpid(-1, status, 0); //pid=-1 ç­‰å¾…ä»»ä½•å­è¿›ç¨‹,ç›¸å½“äº wait()ã€‚
        //ä»»æ„å­è¿›ç¨‹ç»“æŸï¼Œè¿”å›å­è¿›ç¨‹ç»“æŸçŠ¶æ€å€¼ã€‚
        //optionsè®¾ä¸º0è¡¨ç¤ºä¸ä½¿ç”¨è¿™ä¸ªå‚æ•°
        wait(NULL);
    }
    else if (rc == 0)
    { //å­è¿›ç¨‹
        execve(path, args, 0);
    }
    else
    {                                                //åˆ›å»ºå¤±è´¥
        fprintf(stderr, "ğŸ™€ğŸ™€ğŸ™€âŒerror:fork failed!\n"); //æŠŠæ ¼å¼å­—ç¬¦ä¸²è¾“å‡ºåˆ°æŒ‡å®šæ–‡ä»¶è®¾å¤‡ä¸­
        //åœ¨è¿™é‡Œæ˜¯è¾“å‡ºåˆ°æ ‡å‡†é”™è¯¯è¾“å‡ºè®¾å¤‡ï¼Œé»˜è®¤è¾“å‡ºåˆ°å±å¹•
        return 0;
    }
    return 1;
}